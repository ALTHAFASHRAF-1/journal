<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Academic Research Journal - Peer-reviewed scholarly publications across multiple disciplines">
<meta name="keywords" content="academic journal, research papers, scholarly articles, peer review, scientific publications">
<meta name="author" content="Academic Research Journal">
<title>Islamic Insight</title>
<link rel="icon" type="image/png" href="logo.png">

<meta name="title" content="Islamic Insight">
<meta name="description" content="Journal of Islamic Studies">

<!-- Open Graph / Facebook / WhatsApp -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://dqdhiu.netlify.app/">
<meta property="og:title" content="Islamic Insight">
<meta property="og:description" content="Journal of Islamic Studies">
<meta property="og:image" content="https://dqdhiu.netlify.app/banner.jpg">
<meta property="og:image:alt" content="Islamic Insight Logo">    

<!-- CSS Libraries -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<!-- JavaScript Libraries -->
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

<style>
body {
font-family: 'Inter', sans-serif;
line-height: 1.6;
color: #1a202c;
}

.academic-title {
font-family: 'Crimson Text', serif;
}

.article-content h1, .article-content h2, .article-content h3 {
font-family: 'Crimson Text', serif;
font-weight: 600;
}

.article-content p {
margin-bottom: 1rem;
text-align: justify;
line-height: 1.7;
}

.article-content h2 {
margin-top: 2rem;
margin-bottom: 1rem;
font-size: 1.5rem;
color: #2d3748;
}

.article-content h3 {
margin-top: 1.5rem;
margin-bottom: 0.75rem;
font-size: 1.25rem;
color: #4a5568;
}

.citation-box {
background: #f7fafc;
border-left: 4px solid #4299e1;
padding: 1rem;
margin: 1rem 0;
font-style: italic;
}

@media (max-width: 768px) {
.article-content {
font-size: 0.95rem;
}

.article-content h2 {
font-size: 1.3rem;
}

.article-content h3 {
font-size: 1.1rem;
}
}

.mobile-menu {
transition: all 0.3s ease;
}

.article-card {
transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.article-card:hover {
transform: translateY(-2px);
box-shadow: 0 10px 25px rgba(0,0,0,0.1);
}

.modal {
backdrop-filter: blur(4px);
}

.search-container {
position: relative;
}

.search-results {
position: absolute;
top: 100%;
left: 0;
right: 0;
background: white;
border: 1px solid #e2e8f0;
border-radius: 0.5rem;
box-shadow: 0 10px 25px rgba(0,0,0,0.1);
max-height: 400px;
overflow-y: auto;
z-index: 50;
}

.badge {
display: inline-block;
padding: 0.25rem 0.75rem;
border-radius: 9999px;
font-size: 0.75rem;
font-weight: 600;
margin-right: 0.5rem;
margin-bottom: 0.25rem;
}

.badge-blue { background: #ebf8ff; color: #2b6cb0; }
.badge-green { background: #f0fff4; color: #2f855a; }
.badge-red { background: #fff5f5; color: #c53030; }
.badge-purple { background: #faf5ff; color: #6b46c1; }
.badge-yellow { background: #fffaf0; color: #b7791f; }

.pdf-content {
display: none;
}

.article-image {
height: 200px;
background-size: cover;
background-position: center;
border-radius: 8px 8px 0 0;
}

.featured-article-image {
width: 100%;
height: 200px;
object-fit: cover;
border-radius: 8px 8px 0 0;
}

.logo-container {
display: flex;
align-items: center;
gap: 0.75rem;
}

.logo-image {
height: 40px;
width: auto;
}

.logo-text-container {
display: flex;
flex-direction: column;
align-items: flex-start;
}

.logo-text {
line-height: 1;
margin: 0;
}

.logo-subtitle {
font-size: 0.75rem;
color: #6b7280;
margin: 0;
line-height: 1;
font-weight: 400;
}

@media (max-width: 768px) {
.logo-image {
height: 32px;
}

.logo-text {
font-size: 1rem;
}

.logo-subtitle {
font-size: 0.65rem;
}
}

.dropdown {
position: relative;
}

.dropdown-content {
display: none;
position: absolute;
top: 100%;
right: 0;
background-color: white;
min-width: 160px;
box-shadow: 0 8px 16px rgba(0,0,0,0.1);
border-radius: 0.5rem;
z-index: 1000;
border: 1px solid #e2e8f0;
}

.dropdown:hover .dropdown-content {
display: block;
}

.dropdown-content a {
color: #374151;
padding: 12px 16px;
text-decoration: none;
display: block;
transition: background-color 0.2s;
}

.dropdown-content a:hover {
background-color: #f3f4f6;
}

.dropdown-content a:first-child {
border-radius: 0.5rem 0.5rem 0 0;
}

.dropdown-content a:last-child {
border-radius: 0 0 0.5rem 0.5rem;
}

.current-issue-card {
transition: all 0.3s ease;
}

.current-issue-card:hover {
transform: translateY(-2px);
box-shadow: 0 15px 35px rgba(0,0,0,0.1);
}

.journal-cover-container {
background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
}

@media (max-width: 1024px) {
.journal-cover-container {
background: #f8fafc;
}
}

.current-issue-image-container {
    width: 100%;
    height: 280px;
    display: flex;
    justify-content: center;
    align-items: center;
}

.current-issue-image {
    max-width: 100%;
    max-height: 100%;
    width: auto;
    height: auto;
    object-fit: contain;
    border-radius: 8px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

@media (max-width: 1024px) {
    .current-issue-image-container {
        height: 200px;
    }
}        

.nav-right {
    margin-left: auto;
}

/* Enhanced Search Styles */
.search-icon {
    color: #2563eb;
    cursor: pointer;
    transition: all 0.3s ease;
    padding: 0.5rem;
    border-radius: 0.375rem;
}

.search-icon:hover {
    color: #1d4ed8;
    background-color: #f3f4f6;
}

.navbar-search-container {
    position: relative;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
}

.navbar-search-input {
    width: 0;
    opacity: 0;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    padding: 0;
    border: none;
    outline: none;
    background: transparent;
    font-size: 0.875rem;
}

.navbar-search-input.expanded {
    width: 280px;
    opacity: 1;
    padding: 0.75rem 1rem;
    border: 2px solid #3b82f6;
    border-radius: 0.5rem;
    background: white;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
}

.navbar-search-results {
    position: absolute;
    top: calc(100% + 8px);
    left: 0;
    right: 0;
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 0.5rem;
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    max-height: 350px;
    overflow-y: auto;
    z-index: 1000;
}

/* Mobile Search Enhancements */
.mobile-nav-container {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.mobile-search-container {
    position: relative;
    display: flex;
    align-items: center;
}

.mobile-search-input {
    width: 0;
    opacity: 0;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    padding: 0;
    border: none;
    outline: none;
    background: transparent;
    position: absolute;
    right: 40px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 0.875rem;
}

.mobile-search-input.expanded {
    width: 200px;
    opacity: 1;
    padding: 0.625rem 0.875rem;
    border: 2px solid #3b82f6;
    border-radius: 0.5rem;
    background: white;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    position: relative;
    right: 0;
    top: 0;
    transform: none;
}

.mobile-search-results {
    position: absolute;
    top: calc(100% + 8px);
    right: 0;
    left: -120px;
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 0.5rem;
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    max-height: 300px;
    overflow-y: auto;
    z-index: 1000;
}

/* Responsive Search Adjustments */
@media (max-width: 1200px) {
    .navbar-search-input.expanded {
        width: 240px;
    }
}

@media (max-width: 768px) {
    .mobile-search-input.expanded {
        width: 180px;
    }
    
    .mobile-search-results {
        left: -100px;
    }
}

@media (max-width: 640px) {
    .mobile-search-input.expanded {
        width: 160px;
    }
    
    .mobile-search-results {
        left: -80px;
    }
}

@media (max-width: 480px) {
    .mobile-search-input.expanded {
        width: 140px;
    }
    
    .mobile-search-results {
        left: -60px;
    }
}

/* Hide navigation items when search is expanded */
.nav-items.hidden-for-search {
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
}

/* Search Results Styling */
.search-result-item {
    padding: 0.875rem 1rem;
    border-bottom: 1px solid #f3f4f6;
    cursor: pointer;
    transition: background-color 0.2s ease;
}

.search-result-item:hover {
    background-color: #f8fafc;
}

.search-result-item:last-child {
    border-bottom: none;
    border-radius: 0 0 0.5rem 0.5rem;
}

.search-result-item:first-child {
    border-radius: 0.5rem 0.5rem 0 0;
}

/* Mobile Menu Button Enhancement */
.mobile-menu-btn {
    padding: 0.5rem;
    border-radius: 0.375rem;
    transition: all 0.2s ease;
}

.mobile-menu-btn:hover {
    background-color: #f3f4f6;
}

/* Updated Hero and About/Call for Papers Layout */
.hero-about-container {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}

/* Updated Hero Section with Banner Background - Same Dimensions as Original */
.hero-section {
    color: white;
    padding: 2rem 0;
    min-height: 25vh;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
}

/* Desktop Banner Background */
.hero-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url('https://dqdhiu.netlify.app/desktop-banner.jpg');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    z-index: -2;
}

/* Optional overlay for better text readability */
.hero-section::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  /*  background: rgba(30, 58, 138, 0.6);  */
    z-index: -1;
}

/* About and Call for Papers Section */
.about-callforpapers-section {
    background: white;
    padding: 3rem 0;
    flex: 1;
}

.about-content h3 {
    font-size: 1.875rem;
    margin-bottom: 1.5rem;
}

.about-content h4 {
    font-size: 1.5rem;
    margin-bottom: 1rem;
}

/* Updated layout: 75% left (About) and 25% right (Call for Papers) */
.about-callforpapers-grid {
    display: grid;
    grid-template-columns: 3fr 1fr;
    gap: 2rem;
    align-items: start;
}

.about-content-wrapper {
    padding-right: 1rem;
}

.callforpapers-content {
    position: sticky;
    top: 2rem;
    height: fit-content;
}

/* Ensure equal height finishing line */
.callforpapers-card {
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

/* Enhanced text positioning for banner */
.hero-content {
    position: relative;
    z-index: 1;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

@media (max-width: 1024px) {
    .hero-section {
        padding: 2rem 0;
        min-height: 20vh;
    }
    
    .about-callforpapers-section {
        padding: 2rem 0;
    }
    
    .about-callforpapers-grid {
        grid-template-columns: 1fr;
        gap: 2rem;
    }
    
    .about-content-wrapper {
        padding-right: 0;
    }
    
    .callforpapers-content {
        position: static;
        margin-top: 2rem;
    }
}

@media (max-width: 768px) {
    .hero-section {
        padding: 1.5rem 0;
        min-height: 18vh;
    }
    
    .hero-section::before {
        background-image: url('https://dqdhiu.netlify.app/mobile-banner.jpg');
    }
    
    .hero-section h2 {
        font-size: 2rem !important;
    }
    
    .hero-section p {
        font-size: 1rem !important;
    }
}

/* Enhanced Responsive Typography */
@media (max-width: 768px) {
    .logo-text {
        font-size: 0.9rem;
    }
    
    .logo-subtitle {
        font-size: 0.6rem;
    }
}

@media (max-width: 480px) {
    .logo-text {
        font-size: 0.85rem;
    }
    
    .logo-subtitle {
        font-size: 0.55rem;
    }
}

/* Loading spinner for search */
.search-loading {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 2rem;
}

.spinner {
    border: 2px solid #f3f3f3;
    border-top: 2px solid #3b82f6;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}
</style>

</head>

<body class="bg-gray-50">
<!-- Navigation -->
<nav class="bg-white shadow-sm sticky top-0 z-40">
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
<div class="flex justify-between items-center h-16">
<div class="flex items-center">
<div class="flex-shrink-0">
<div class="logo-container">
<img src="logo.png" alt="Islamic Insight Logo" class="logo-image">
<div class="logo-text-container">
<h1 class="logo-text text-xl font-bold text-black-900 academic-title">
ISLAMIC INSIGHT
</h1>
<p class="logo-subtitle">Journal of Islamic Studies</p>
</div>
</div>
</div>
</div>

<!-- Desktop Navigation - Moved to right -->
<div class="hidden md:block nav-right">
<div class="flex items-center space-x-6">
<!-- Navigation Items -->
<div id="nav-items" class="nav-items flex items-baseline space-x-6">
<a href="#home" class="text-gray-700 hover:text-blue-900 px-3 py-2 text-sm font-medium transition-colors">Home</a>
<a href="call-for-papers.html" class="text-gray-700 hover:text-blue-900 px-3 py-2 text-sm font-medium transition-colors">Call For Paper</a>
<a href="#featured" class="text-gray-700 hover:text-blue-900 px-3 py-2 text-sm font-medium transition-colors">Current Issue</a>
<a href="all-issues.html" class="text-gray-700 hover:text-blue-900 px-3 py-2 text-sm font-medium transition-colors">All Issues</a>
<div class="dropdown">
<a href="#about" class="text-gray-700 hover:text-blue-900 px-3 py-2 text-sm font-medium transition-colors">About</a>
<div class="dropdown-content">
<a href="editors.html">Editorial Team</a>
<a href="#contact">Contact</a>
</div>
</div>
</div>

<!-- Search Container -->
<div class="navbar-search-container">
<input
type="text"
id="navbar-search-input"
placeholder="Search articles, authors..."
class="navbar-search-input"
>
<button id="search-toggle-btn" class="search-icon">
<i id="search-icon" class="fas fa-search text-lg"></i>
</button>
<div id="navbar-search-results" class="navbar-search-results hidden"></div>
</div>
</div>
</div>

<!-- Mobile menu button and search - Moved to right -->
<div class="md:hidden nav-right">
    <div class="mobile-nav-container">
        <!-- Mobile Search Container -->
        <div class="mobile-search-container">
            <input
                type="text"
                id="mobile-search-input"
                placeholder="Search..."
                class="mobile-search-input"
            >
            <button id="mobile-search-toggle-btn" class="search-icon">
                <i id="mobile-search-icon" class="fas fa-search text-lg"></i>
            </button>
            <div id="mobile-search-results" class="mobile-search-results hidden"></div>
        </div>
        
        <!-- Mobile Menu Button -->
        <button id="mobile-menu-btn" class="mobile-menu-btn text-gray-700 hover:text-blue-900 focus:outline-none">
            <i class="fas fa-bars text-lg"></i>
        </button>
    </div>
</div>
</div>
</div>

<!-- Mobile Navigation -->
<div id="mobile-menu" class="hidden md:hidden bg-white border-t border-gray-200">
<div class="px-2 pt-2 pb-3 space-y-1">
<a href="#home" class="block px-3 py-2 text-sm font-medium text-gray-700 hover:text-blue-900 transition-colors">Home</a>
<a href="call-for-papers.html" class="block px-3 py-2 text-sm font-medium text-gray-700 hover:text-blue-900 transition-colors">Call For Paper</a>
<a href="#featured" class="block px-3 py-2 text-sm font-medium text-gray-700 hover:text-blue-900 transition-colors">Current Issue</a>
<a href="all-issues.html" class="block px-3 py-2 text-sm font-medium text-gray-700 hover:text-blue-900 transition-colors">All Issues</a>
<a href="#about" class="block px-3 py-2 text-sm font-medium text-gray-700 hover:text-blue-900 transition-colors">About</a>
<a href="editors.html" class="block px-3 py-2 pl-6 text-sm font-medium text-gray-600 hover:text-blue-900 transition-colors">Editorial Team</a>
<a href="#contact" class="block px-3 py-2 pl-6 text-sm font-medium text-gray-600 hover:text-blue-900 transition-colors">Contact</a>
</div>
</div>
</nav>

<!-- Updated Home Section with Banner Background -->
<section id="home" class="hero-about-container">
    <!-- Hero Section - Now with Banner Background -->
    <div class="hero-section">

    </div>
    
    <!-- About and Call for Papers Section - 75% / 25% Layout -->
    <div id="about" class="about-callforpapers-section">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="about-callforpapers-grid">
                
                <!-- About Journal - Left Side (75%) -->
                <div class="about-content-wrapper">
                    <div class="about-content">
                        <div class="text-left">
                            <h4 class="text-2xl sm:text-3xl font-bold academic-title text-gray-900 mb-6">
                                About Our Journal
                            </h4>
                        </div>
                        
                        <div class="space-y-6">
                            <div>
                                <p class="text-gray-700 text-base leading-relaxed text-justify mb-4">
                                    Islamic Insight is an international, peer-reviewed cross-disciplinary journal dedicated to publishing original scholarship of exceptional quality on all aspects of Islam and the Muslim world. Inasmuch as it caters for a robust scholarly engagement with Islam in light of cutting-edge developments in the humanities and social sciences, the journal provides a forum for high quality research works that contribute substantively to contemporary discourse in Islamic studies in all its richness and complexities.
                                </p>
                                <p class="text-gray-700 text-base leading-relaxed text-justify mb-4">
                                    The journal is very keen on articles, research communications, and book reviews that deal with Islam and the Islamic tradition in its many facets and manifestations and exploit perspectives and analytics that straddle disciplines and frontiers of knowledge.
                                </p>
                                <p class="text-gray-700 text-base leading-relaxed text-justify">
                                    We welcome submissions across various disciplines including Quranic studies, Hadith scholarship, Islamic theology and philosophy, Islamic law and jurisprudence, Islamic history and civilization, Muslim societies and cultures, comparative religion, and contemporary Islamic thought. Our commitment to scholarly excellence is reflected in our rigorous peer-review process and our dedication to advancing knowledge in Islamic studies through innovative research and critical analysis.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Call for Papers - Right Side (25%) -->
                <div class="callforpapers-content">
                    <div class="bg-blue-50 border-l-4 border-blue-500 rounded-lg p-6 callforpapers-card">
                        <div class="flex items-center mb-4">
                            <i class="fas fa-bullhorn text-blue-500 text-xl mr-3"></i>
                            <h3 class="text-xl font-bold academic-title text-blue-900">Call For Papers</h3>
                        </div>
                        
                        <div class="flex-grow">
                            <p class="text-gray-700 mb-4 leading-relaxed text-sm">
                                We are pleased to invite original research articles for the upcoming issue of Islamic Insight, a biannual peer-reviewed journal published by the Kulliyyah of Qur'an and Sunnah, Darul Huda Islamic University, Kerala, India.
                            </p>
                            <p class="text-gray-700 mb-4 leading-relaxed text-sm">
                                Islamic Insight welcomes high-quality, interdisciplinary research in areas related to Islamic revealed knowledge and the Muslim world.
                            </p>
                        </div>
                        
                        <div class="mt-auto">
                            <div class="text-sm text-gray-600 mb-4">
                                <i class="far fa-calendar-alt mr-2"></i> <strong>Deadline:</strong> Mid-June 2025
                            </div>
                            <button 
                                onclick="location.href='call-for-papers.html'" 
                                class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors text-sm w-full">
                                Read More Details <i class="fas fa-arrow-right ml-2"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Current Issue Section -->
<section id="featured" class="py-12 sm:py-16 lg:py-20 bg-gray-50">
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
<div class="text-center mb-8">
<h2 class="text-2xl sm:text-3xl lg:text-4xl font-bold academic-title text-gray-900 mb-4">
Current Issue
</h2>
</div>

<!-- Loading State -->
<div id="current-issue-loading" class="text-center py-12">
    <div class="inline-block w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"></div>
    <p class="mt-4 text-gray-600">Loading current issue...</p>
</div>

<!-- Error State -->
<div id="current-issue-error" class="text-center py-12" style="display: none;">
    <div class="text-red-500 mb-4">
        <i class="fas fa-exclamation-triangle text-4xl"></i>
    </div>
    <h3 class="text-lg font-medium text-gray-900 mb-2">Error Loading Current Issue</h3>
    <p class="text-gray-600">Failed to load the latest issue. Please try again later.</p>
</div>

<!-- Dynamic Current Issue Container -->
<div id="current-issue-container" style="display: none;">
    <!-- Content will be dynamically populated -->
</div>

</div>
</section>


 <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div class="col-span-1 md:col-span-2">
                    <div class="logo-container mb-4">
                        <img src="logo.png" alt="Islamic Insight Logo" class="logo-image">
                        <div class="logo-text-container">
                            <h1 class="logo-text text-white">ISLAMIC INSIGHT</h1>
                            <p class="logo-subtitle text-gray-300">Journal of Islamic Studies</p>
                        </div>
                    </div>
                    <p class="text-gray-300 mb-4">
                     <strong> MAILING ADDRESS:</strong><br>Editor, Islamic Insight Journal of Islamic Studies, Darul Huda Islamic <br> University, Chemmad, P.B.NO. 3, Tirurangadi (PO), Malappuram (Dt.),<br>676306 (PIN), Kerala, India.<br><br>Email: islamicinsight@dhiu.in <br><br>Website: www.islamicinsight.in
                    </p>
                </div>

                <div>
                    <h3 class="text-lg font-semibold mb-4">Quick Links</h3>
                    <ul class="space-y-2">
                        <li><a href="#about" class="text-gray-300 hover:text-white transition-colors">About Journal</a></li>
                        <li><a href="editors.html" class="text-gray-300 hover:text-white transition-colors">Editorial Board</a></li>
                        <li><a href="call-for-papers.html" class="text-gray-300 hover:text-white transition-colors">Submission Guidelines</a></li>
                        <li><a href="#contact" class="text-gray-300 hover:text-white transition-colors">Contact Us</a></li>
                    </ul>
                </div>

                <div>
                    <h3 class="text-lg font-semibold mb-4">Connect</h3>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-300 hover:text-white transition-colors">
                            <i class="fab fa-twitter text-xl"></i>
                        </a>
                        <a href="#" class="text-gray-300 hover:text-white transition-colors">
                            <i class="fab fa-facebook text-xl"></i>
                        </a>
                        <a href="#" class="text-gray-300 hover:text-white transition-colors">
                            <i class="fab fa-linkedin text-xl"></i>
                        </a>
                        <a href="#" class="text-gray-300 hover:text-white transition-colors">
                            <i class="fas fa-envelope text-xl"></i>
                        </a>
                    </div>
                </div>
            </div>

            <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-300">
                <p>&copy; 2024 Islamic Insight Journal. All rights reserved.</p>
            </div>
        </div>
    </footer>

<!-- Include the unified data loader -->
<script src="sheets-loader.js"></script>

<script>
// Global variables for search functionality
let allArticles = [];
let isDataLoaded = false;

// DOM Elements
const mobileMenuBtn = document.getElementById('mobile-menu-btn');
const mobileMenu = document.getElementById('mobile-menu');
const contactForm = document.getElementById('contact-form');

// Enhanced search elements
const searchToggleBtn = document.getElementById('search-toggle-btn');
const navbarSearchInput = document.getElementById('navbar-search-input');
const navbarSearchResults = document.getElementById('navbar-search-results');
const searchIcon = document.getElementById('search-icon');
const navItems = document.getElementById('nav-items');

// Mobile search elements
const mobileSearchToggleBtn = document.getElementById('mobile-search-toggle-btn');
const mobileSearchInput = document.getElementById('mobile-search-input');
const mobileSearchResults = document.getElementById('mobile-search-results');
const mobileSearchIcon = document.getElementById('mobile-search-icon');

// Search state tracking
let isDesktopSearchExpanded = false;
let isMobileSearchExpanded = false;

// Initialize the application
document.addEventListener('DOMContentLoaded', function() {
    setupEventListeners();
    loadJournalData();
});

// Load journal data from sheets
async function loadJournalData() {
    try {
        console.log('Loading journal data for search...');
        
        // Wait for the data to be loaded by sheets-loader.js
        if (typeof sheetsDataManager !== 'undefined') {
            await sheetsDataManager.loadFromSheets();
            allArticles = await sheetsDataManager.getAllArticles();
        } else {
            // Fallback: wait for global data to be available
            await new Promise((resolve) => {
                const checkData = () => {
                    if (window.journalData && window.articlesData) {
                        allArticles = Object.values(window.articlesData);
                        resolve();
                    } else {
                        setTimeout(checkData, 100);
                    }
                };
                checkData();
            });
        }
        
        isDataLoaded = true;
        console.log('Articles loaded for search:', allArticles.length);
        
    } catch (error) {
        console.error('Error loading journal data:', error);
        isDataLoaded = false;
    }
}

// Setup event listeners
function setupEventListeners() {
    // Mobile menu toggle
    if (mobileMenuBtn) {
        mobileMenuBtn.addEventListener('click', function() {
            mobileMenu.classList.toggle('hidden');
        });
    }

    // Desktop navbar search functionality
    if (searchToggleBtn) {
        searchToggleBtn.addEventListener('click', toggleNavbarSearch);
        navbarSearchInput.addEventListener('input', handleNavbarSearch);
        navbarSearchInput.addEventListener('focus', function() {
            if (navbarSearchInput.value.trim()) {
                navbarSearchResults.classList.remove('hidden');
            }
        });
    }

    // Mobile search functionality
    if (mobileSearchToggleBtn) {
        mobileSearchToggleBtn.addEventListener('click', toggleMobileSearch);
        mobileSearchInput.addEventListener('input', handleMobileSearch);
        mobileSearchInput.addEventListener('focus', function() {
            if (mobileSearchInput.value.trim()) {
                mobileSearchResults.classList.remove('hidden');
            }
        });
    }

    // Enhanced keyboard support for search
    if (navbarSearchInput) {
        navbarSearchInput.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                toggleNavbarSearch();
            }
        });
    }

    if (mobileSearchInput) {
        mobileSearchInput.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                toggleMobileSearch();
            }
        });
    }

    // Close search results when clicking outside
    document.addEventListener('click', function(e) {
        // Desktop search
        if (navbarSearchInput && navbarSearchResults && searchToggleBtn &&
            !navbarSearchInput.contains(e.target) && 
            !navbarSearchResults.contains(e.target) && 
            !searchToggleBtn.contains(e.target)) {
            navbarSearchResults.classList.add('hidden');
        }

        // Mobile search
        if (mobileSearchInput && mobileSearchResults && mobileSearchToggleBtn &&
            !mobileSearchInput.contains(e.target) && 
            !mobileSearchResults.contains(e.target) && 
            !mobileSearchToggleBtn.contains(e.target)) {
            mobileSearchResults.classList.add('hidden');
        }
    });

    // Contact form
    if (contactForm) {
        contactForm.addEventListener('submit', handleContactForm);
    }

    // Smooth scrolling for navigation links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
                // Close mobile menu if open
                if (mobileMenu) {
                    mobileMenu.classList.add('hidden');
                }
            }
        });
    });
}

// Enhanced toggle navbar search with better state management
function toggleNavbarSearch() {
    isDesktopSearchExpanded = !isDesktopSearchExpanded;

    if (isDesktopSearchExpanded) {
        // Expand search
        navbarSearchInput.classList.add('expanded');
        navItems.classList.add('hidden-for-search');
        searchIcon.className = 'fas fa-times text-lg';
        navbarSearchInput.focus();
    } else {
        // Collapse search
        navbarSearchInput.classList.remove('expanded');
        navItems.classList.remove('hidden-for-search');
        searchIcon.className = 'fas fa-search text-lg';
        navbarSearchResults.classList.add('hidden');
        navbarSearchInput.value = '';
    }
}

// Enhanced toggle mobile search with proper cross functionality
function toggleMobileSearch() {
    isMobileSearchExpanded = !isMobileSearchExpanded;

    if (isMobileSearchExpanded) {
        // Expand search
        mobileSearchInput.classList.add('expanded');
        mobileSearchIcon.className = 'fas fa-times text-lg';
        mobileSearchInput.focus();
    } else {
        // Collapse search
        mobileSearchInput.classList.remove('expanded');
        mobileSearchIcon.className = 'fas fa-search text-lg';
        mobileSearchResults.classList.add('hidden');
        mobileSearchInput.value = '';
    }
}

// Handle navbar search with improved filtering
function handleNavbarSearch() {
    const query = navbarSearchInput.value.toLowerCase().trim();

    if (!query) {
        navbarSearchResults.classList.add('hidden');
        return;
    }

    if (!isDataLoaded) {
        displaySearchLoading(navbarSearchResults);
        return;
    }

    const filteredArticles = searchArticles(query);
    displayNavbarSearchResults(filteredArticles, query);
}

// Handle mobile search with improved filtering
function handleMobileSearch() {
    const query = mobileSearchInput.value.toLowerCase().trim();

    if (!query) {
        mobileSearchResults.classList.add('hidden');
        return;
    }

    if (!isDataLoaded) {
        displaySearchLoading(mobileSearchResults);
        return;
    }

    const filteredArticles = searchArticles(query);
    displayMobileSearchResults(filteredArticles, query);
}

// Search articles function
function searchArticles(query) {
    if (!allArticles || allArticles.length === 0) {
        return [];
    }

    return allArticles.filter(article => {
        const searchableText = [
            article.title || '',
            article.author || '',
            ...(article.authors ? article.authors.map(a => a.name || '') : []),
            article.abstract || '',
            ...(article.keywords || []),
            article.issueTitle || '',
            `Vol. ${article.volume} No. ${article.number}` || ''
        ].join(' ').toLowerCase();

        return searchableText.includes(query);
    });
}

// Display loading state
function displaySearchLoading(resultsContainer) {
    resultsContainer.innerHTML = `
        <div class="search-loading">
            <div class="spinner"></div>
            <span class="ml-2 text-gray-600">Loading articles...</span>
        </div>
    `;
    resultsContainer.classList.remove('hidden');
}

// Enhanced display navbar search results with redirect functionality
function displayNavbarSearchResults(results, query) {
    if (results.length === 0) {
        navbarSearchResults.innerHTML = `
            <div class="p-4 text-center text-gray-500">
                <i class="fas fa-search text-2xl mb-2 text-gray-400"></i>
                <p>No articles found for "<strong>${query}</strong>"</p>
            </div>
        `;
    } else {
        navbarSearchResults.innerHTML = results.slice(0, 10).map(article => `
            <div class="search-result-item" onclick="redirectToArticle(${article.id}); toggleNavbarSearch();">
                <h4 class="font-semibold text-gray-900 mb-1 text-sm">${highlightSearchTerm(article.title, query)}</h4>
                ${getAuthorDisplay(article) ? `<p class="text-sm text-gray-600 mb-2">${highlightSearchTerm(getAuthorDisplay(article), query)}</p>` : ''}
                <p class="text-xs text-gray-500">${highlightSearchTerm((article.abstract || '').substring(0, 120), query)}${article.abstract && article.abstract.length > 120 ? '...' : ''}</p>
                <div class="flex flex-wrap gap-1 mt-2">
                    <span class="badge badge-blue text-xs">${article.issueTitle || `Vol. ${article.volume} No. ${article.number}`}</span>
                    ${article.publishedDate ? `<span class="badge badge-green text-xs">${article.publishedDate}</span>` : ''}
                </div>
            </div>
        `).join('');
    }

    navbarSearchResults.classList.remove('hidden');
}

// Enhanced display mobile search results with redirect functionality
function displayMobileSearchResults(results, query) {
    if (results.length === 0) {
        mobileSearchResults.innerHTML = `
            <div class="p-3 text-center text-gray-500 text-sm">
                <i class="fas fa-search text-lg mb-1 text-gray-400"></i>
                <p>No articles found for "<strong>${query}</strong>"</p>
            </div>
        `;
    } else {
        mobileSearchResults.innerHTML = results.slice(0, 8).map(article => `
            <div class="search-result-item text-sm" onclick="redirectToArticle(${article.id}); toggleMobileSearch();">
                <h4 class="font-semibold text-gray-900 mb-1">${highlightSearchTerm(article.title, query)}</h4>
                ${getAuthorDisplay(article) ? `<p class="text-xs text-gray-600 mb-1">${highlightSearchTerm(getAuthorDisplay(article), query)}</p>` : ''}
                <p class="text-xs text-gray-500">${highlightSearchTerm((article.abstract || '').substring(0, 100), query)}${article.abstract && article.abstract.length > 100 ? '...' : ''}</p>
                <div class="flex flex-wrap gap-1 mt-1">
                    <span class="badge badge-blue text-xs">${article.issueTitle || `Vol. ${article.volume} No. ${article.number}`}</span>
                </div>
            </div>
        `).join('');
    }

    mobileSearchResults.classList.remove('hidden');
}

// Helper function to get author display
function getAuthorDisplay(article) {
    if (article.authors && article.authors.length > 0) {
        return article.authors.map(author => author.name).join(', ');
    }
    return article.author || '';
}

// Redirect to article page
function redirectToArticle(articleId) {
    window.location.href = `articles.html?id=${articleId}`;
}

// Highlight search terms in results
function highlightSearchTerm(text, query) {
    if (!query || !text) return text;
    const regex = new RegExp(`(${query.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})`, 'gi');
    return text.replace(regex, '<mark class="bg-yellow-200 px-1 rounded">$1</mark>');
}

// Handle contact form submission
function handleContactForm(e) {
    e.preventDefault();

    const formData = new FormData(contactForm);
    const name = formData.get('name') || document.getElementById('name').value;
    const email = formData.get('email') || document.getElementById('email').value;
    const subject = formData.get('subject') || document.getElementById('subject').value;
    const message = formData.get('message') || document.getElementById('message').value;

    // Simulate form submission
    alert('Thank you for your message! We will get back to you soon.');
    contactForm.reset();
}

// Listen for the journalDataLoaded event
window.addEventListener('journalDataLoaded', function() {
    console.log('Journal data loaded event received');
    loadJournalData();
});

// Current Issue Loader
class CurrentIssueLoader {
    constructor() {
        this.currentIssue = null;
    }

    async init() {
        try {
            this.showLoading(true);
            
            // Wait for journal data to be loaded
            if (!window.journalData) {
                await this.waitForJournalData();
            }

            if (!window.journalData || !window.journalData.issues) {
                throw new Error('Journal data not available');
            }

            this.loadCurrentIssue();
            this.renderCurrentIssue();
            
            this.showLoading(false);
            document.getElementById('current-issue-container').style.display = 'block';

        } catch (error) {
            console.error('Error loading current issue:', error);
            this.showError();
        }
    }

    waitForJournalData(timeout = 10000) {
        return new Promise((resolve, reject) => {
            const startTime = Date.now();
            
            const checkData = () => {
                if (window.journalData && window.journalData.issues) {
                    resolve();
                } else if (Date.now() - startTime > timeout) {
                    reject(new Error('Timeout waiting for journal data'));
                } else {
                    setTimeout(checkData, 100);
                }
            };
            
            checkData();
        });
    }

    loadCurrentIssue() {
        const issues = Object.entries(window.journalData.issues).map(([issueId, issue]) => ({
            id: issueId,
            ...issue
        }));

        // Sort to get the latest issue (by year, then volume, then number)
        issues.sort((a, b) => {
            if (b.year !== a.year) return b.year - a.year;
            if (b.volume !== a.volume) return b.volume - a.volume;
            return b.number - a.number;
        });

        if (issues.length > 0) {
            this.currentIssue = issues[0];
        }
    }

    renderCurrentIssue() {
        if (!this.currentIssue) {
            this.showError();
            return;
        }

        const issue = this.currentIssue;
        const abstract = issue.description || issue.abstract || this.generateDefaultAbstract(issue);
        
        const currentIssueHTML = `
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden current-issue-card">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-0">
                    <!-- Journal cover - Left side -->
                    <div class="lg:col-span-1 p-2 flex justify-center items-center bg-gray-50">
                        <div class="current-issue-image-container">
                            <img src="${issue.coverImage || 'https://via.placeholder.com/300x400/4f46e5/ffffff?text=Journal+Cover'}" 
                                 alt="${issue.title}" 
                                 class="current-issue-image"
                                 onerror="this.src='https://via.placeholder.com/300x400/4f46e5/ffffff?text=Journal+Cover'">
                        </div>
                    </div>
                    <!-- Content - Right side -->
                    <div class="lg:col-span-2 p-6">
                        <h3 class="text-xl sm:text-2xl font-semibold academic-title text-gray-900 mb-4">
                            ${issue.title}
                        </h3>
                        
                        <p class="text-gray-700 mb-6 leading-relaxed text-justify">
                            ${abstract}
                        </p>
                        
                        <div class="mb-6 space-y-2">
                            <p class="text-sm text-gray-600">
                                <i class="far fa-calendar-alt mr-2"></i><strong>Published:</strong> ${this.formatDate(issue.publishedDate)}
                            </p>
                            <p class="text-sm text-gray-600">
                                <i class="fas fa-book mr-2"></i><strong>Volume:</strong> ${issue.volume}, Number ${issue.number}
                            </p>
                            <p class="text-sm text-gray-600">
                                <i class="fas fa-file-alt mr-2"></i><strong>Articles:</strong> ${issue.articles ? issue.articles.length : 0} article${issue.articles && issue.articles.length !== 1 ? 's' : ''}
                            </p>
                        </div>
                        
                        <div class="flex justify-between items-center">
                            <button 
                                onclick="window.location.href='issues.html?issue=${issue.id}'" 
                                class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium transition-colors">
                                View Articles <i class="fas fa-arrow-right ml-2"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        `;

        document.getElementById('current-issue-container').innerHTML = currentIssueHTML;
    }

    generateDefaultAbstract(issue) {
        return `Islamic Insight Journal of Islamic Studies (IIJIS) functions as a bilingual (English and Arabic) platform for disseminating exceptional academic research on Islam and the Muslim world. This issue contains ${issue.articles ? issue.articles.length : 0} scholarly articles covering various aspects of Islamic studies, including Quranic studies, Hadith analysis, Islamic jurisprudence, theology, philosophy, and contemporary Islamic thought.`;
    }

    formatDate(dateString) {
        const date = new Date(dateString);
        const options = { year: 'numeric', month: 'long', day: 'numeric' };
        return date.toLocaleDateString('en-US', options);
    }

    showLoading(show) {
        const loadingState = document.getElementById('current-issue-loading');
        const errorState = document.getElementById('current-issue-error');
        const container = document.getElementById('current-issue-container');

        if (loadingState) {
            loadingState.style.display = show ? 'block' : 'none';
        }
        if (errorState) {
            errorState.style.display = 'none';
        }
        if (container && !show) {
            container.style.display = 'block';
        }
    }

    showError() {
        const loadingState = document.getElementById('current-issue-loading');
        const errorState = document.getElementById('current-issue-error');
        const container = document.getElementById('current-issue-container');
        
        if (loadingState) loadingState.style.display = 'none';
        if (container) container.style.display = 'none';
        if (errorState) errorState.style.display = 'block';
    }
}

// Initialize Current Issue Loader
let currentIssueLoader;

// Update the existing DOMContentLoaded event listener
document.addEventListener('DOMContentLoaded', function() {
    setupEventListeners();
    loadJournalData();
    
    // Initialize current issue loader
    currentIssueLoader = new CurrentIssueLoader();
});

// Update the existing loadJournalData function
async function loadJournalData() {
    try {
        console.log('Loading journal data for search...');
        
        // Wait for the data to be loaded by sheets-loader.js
        if (typeof sheetsDataManager !== 'undefined') {
            await sheetsDataManager.loadFromSheets();
            allArticles = await sheetsDataManager.getAllArticles();
        } else {
            // Fallback: wait for global data to be available
            await new Promise((resolve) => {
                const checkData = () => {
                    if (window.journalData && window.articlesData) {
                        allArticles = Object.values(window.articlesData);
                        resolve();
                    } else {
                        setTimeout(checkData, 100);
                    }
                };
                checkData();
            });
        }
        
        isDataLoaded = true;
        console.log('Articles loaded for search:', allArticles.length);
        
        // Initialize current issue after data is loaded
        if (currentIssueLoader) {
            await currentIssueLoader.init();
        }
        
    } catch (error) {
        console.error('Error loading journal data:', error);
        isDataLoaded = false;
        if (currentIssueLoader) {
            currentIssueLoader.showError();
        }
    }
}

// Also listen for the journalDataLoaded event
window.addEventListener('journalDataLoaded', async function() {
    console.log('Journal data loaded event received');
    await loadJournalData();
});    
</script>
</body>
</html>
